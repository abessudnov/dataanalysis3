<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Data Analysis in Social Science 3</title>
  <meta name="description" content="A website for the Data Analysis in Social Science 3 module.">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Data Analysis in Social Science 3" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://abessudnov.net/dataanalysis3/" />
  
  <meta property="og:description" content="A website for the Data Analysis in Social Science 3 module." />
  <meta name="github-repo" content="abessudnov/dataanalysis3" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Data Analysis in Social Science 3" />
  
  <meta name="twitter:description" content="A website for the Data Analysis in Social Science 3 module." />
  

<meta name="author" content="Alexey Bessudnov">


<meta name="date" content="2018-03-30">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="datavis2.html">
<link rel="next" href="modelling.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113869422-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-113869422-1');
</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#things-to-do-before-the-next-class"><i class="fa fa-check"></i><b>1.1</b> Things to do before the next class</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="module-outline.html"><a href="module-outline.html"><i class="fa fa-check"></i><b>2</b> Module outline</a><ul>
<li class="chapter" data-level="2.1" data-path="module-outline.html"><a href="module-outline.html#practical-arrangements"><i class="fa fa-check"></i><b>2.1</b> Practical arrangements</a></li>
<li class="chapter" data-level="2.2" data-path="module-outline.html"><a href="module-outline.html#aims-of-the-module"><i class="fa fa-check"></i><b>2.2</b> Aims of the module</a></li>
<li class="chapter" data-level="2.3" data-path="module-outline.html"><a href="module-outline.html#attendance"><i class="fa fa-check"></i><b>2.3</b> Attendance</a></li>
<li class="chapter" data-level="2.4" data-path="module-outline.html"><a href="module-outline.html#assessment"><i class="fa fa-check"></i><b>2.4</b> Assessment</a></li>
<li class="chapter" data-level="2.5" data-path="module-outline.html"><a href="module-outline.html#syllabus-plan"><i class="fa fa-check"></i><b>2.5</b> Syllabus plan</a></li>
<li class="chapter" data-level="2.6" data-path="module-outline.html"><a href="module-outline.html#reading-list"><i class="fa fa-check"></i><b>2.6</b> Reading list</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="assignment.html"><a href="assignment.html"><i class="fa fa-check"></i><b>3</b> Assignment</a></li>
<li class="chapter" data-level="4" data-path="joining.html"><a href="joining.html"><i class="fa fa-check"></i><b>4</b> Joining data from the Understanding Society</a><ul>
<li class="chapter" data-level="4.1" data-path="joining.html"><a href="joining.html#joining-waves-1-and-2"><i class="fa fa-check"></i><b>4.1</b> Joining waves 1 and 2</a></li>
<li class="chapter" data-level="4.2" data-path="joining.html"><a href="joining.html#joining-waves-1-to-7"><i class="fa fa-check"></i><b>4.2</b> Joining waves 1 to 7</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>5</b> Tidy data</a><ul>
<li class="chapter" data-level="5.1" data-path="tidy-data.html"><a href="tidy-data.html#long-and-wide-formats"><i class="fa fa-check"></i><b>5.1</b> Long and wide formats</a></li>
<li class="chapter" data-level="5.2" data-path="tidy-data.html"><a href="tidy-data.html#cleaning-the-data"><i class="fa fa-check"></i><b>5.2</b> Cleaning the data</a></li>
<li class="chapter" data-level="5.3" data-path="tidy-data.html"><a href="tidy-data.html#homework"><i class="fa fa-check"></i><b>5.3</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="datavis.html"><a href="datavis.html"><i class="fa fa-check"></i><b>6</b> Data visualisation</a><ul>
<li class="chapter" data-level="6.1" data-path="datavis.html"><a href="datavis.html#reading-in-the-data"><i class="fa fa-check"></i><b>6.1</b> Reading in the data</a></li>
<li class="chapter" data-level="6.2" data-path="datavis.html"><a href="datavis.html#visualising-one-quantitative-variable"><i class="fa fa-check"></i><b>6.2</b> Visualising one quantitative variable</a><ul>
<li class="chapter" data-level="6.2.1" data-path="datavis.html"><a href="datavis.html#histogram."><i class="fa fa-check"></i><b>6.2.1</b> Histogram.</a></li>
<li class="chapter" data-level="6.2.2" data-path="datavis.html"><a href="datavis.html#density-chart."><i class="fa fa-check"></i><b>6.2.2</b> Density chart.</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="datavis.html"><a href="datavis.html#visualising-one-categorical-variable"><i class="fa fa-check"></i><b>6.3</b> Visualising one categorical variable</a><ul>
<li class="chapter" data-level="6.3.1" data-path="datavis.html"><a href="datavis.html#bar-plot."><i class="fa fa-check"></i><b>6.3.1</b> Bar plot.</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="datavis.html"><a href="datavis.html#visualising-two-quantitative-variables"><i class="fa fa-check"></i><b>6.4</b> Visualising two quantitative variables</a></li>
<li class="chapter" data-level="6.5" data-path="datavis.html"><a href="datavis.html#visualising-one-categorical-and-one-quantitative-variable"><i class="fa fa-check"></i><b>6.5</b> Visualising one categorical and one quantitative variable</a></li>
<li class="chapter" data-level="6.6" data-path="datavis.html"><a href="datavis.html#visualising-two-categorical-variables"><i class="fa fa-check"></i><b>6.6</b> Visualising two categorical variables</a></li>
<li class="chapter" data-level="6.7" data-path="datavis.html"><a href="datavis.html#showing-the-relationships-by-group"><i class="fa fa-check"></i><b>6.7</b> Showing the relationships by group</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="datavis2.html"><a href="datavis2.html"><i class="fa fa-check"></i><b>7</b> Data visualisation 2</a><ul>
<li class="chapter" data-level="7.1" data-path="datavis2.html"><a href="datavis2.html#prepare-the-data"><i class="fa fa-check"></i><b>7.1</b> Prepare the data</a></li>
<li class="chapter" data-level="7.2" data-path="datavis2.html"><a href="datavis2.html#visualising-income"><i class="fa fa-check"></i><b>7.2</b> Visualising income</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>8</b> R Markdown</a></li>
<li class="chapter" data-level="9" data-path="modelling.html"><a href="modelling.html"><i class="fa fa-check"></i><b>9</b> Modelling</a><ul>
<li class="chapter" data-level="9.1" data-path="modelling.html"><a href="modelling.html#cross-sectional-analysis"><i class="fa fa-check"></i><b>9.1</b> Cross-sectional analysis</a><ul>
<li class="chapter" data-level="9.1.1" data-path="modelling.html"><a href="modelling.html#age-and-political-interest"><i class="fa fa-check"></i><b>9.1.1</b> Age and political interest</a></li>
<li class="chapter" data-level="9.1.2" data-path="modelling.html"><a href="modelling.html#sex-and-political-interest"><i class="fa fa-check"></i><b>9.1.2</b> Sex and political interest</a></li>
<li class="chapter" data-level="9.1.3" data-path="modelling.html"><a href="modelling.html#linear-model"><i class="fa fa-check"></i><b>9.1.3</b> Linear model</a></li>
<li class="chapter" data-level="9.1.4" data-path="modelling.html"><a href="modelling.html#interaction-effect-between-sex-and-age"><i class="fa fa-check"></i><b>9.1.4</b> Interaction effect between sex and age</a></li>
<li class="chapter" data-level="9.1.5" data-path="modelling.html"><a href="modelling.html#checking-the-assumptions"><i class="fa fa-check"></i><b>9.1.5</b> Checking the assumptions</a></li>
<li class="chapter" data-level="9.1.6" data-path="modelling.html"><a href="modelling.html#presenting-the-output-for-multiple-regression-models"><i class="fa fa-check"></i><b>9.1.6</b> Presenting the output for multiple regression models</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="modelling.html"><a href="modelling.html#longitudinal-analysis"><i class="fa fa-check"></i><b>9.2</b> Longitudinal analysis</a><ul>
<li class="chapter" data-level="9.2.1" data-path="modelling.html"><a href="modelling.html#simple-model"><i class="fa fa-check"></i><b>9.2.1</b> Simple model</a></li>
<li class="chapter" data-level="9.2.2" data-path="modelling.html"><a href="modelling.html#adding-a-time-constant-variable"><i class="fa fa-check"></i><b>9.2.2</b> Adding a time-constant variable</a></li>
<li class="chapter" data-level="9.2.3" data-path="modelling.html"><a href="modelling.html#adding-a-time-varying-variable"><i class="fa fa-check"></i><b>9.2.3</b> Adding a time-varying variable</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="modelling.html"><a href="modelling.html#further-reading"><i class="fa fa-check"></i><b>9.3</b> Further reading</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis in Social Science 3</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rmarkdown" class="section level1">
<h1><span class="header-section-number">8</span> R Markdown</h1>
<blockquote>
<p>For this class read ch.27 (“R Markdown”) from R for Data Science - <a href="http://r4ds.had.co.nz/r-markdown.html" class="uri">http://r4ds.had.co.nz/r-markdown.html</a></p>
</blockquote>
<p>The traditional approach for statistical data analysis is to analyse the data and write up the results separately. For example, you may conduct your analysis in R and then copy the output to Word and write up your results there. This is an error prone approach. The code and the results are not synchronised so that if you change your code the results will not change automatically. You can also make mistakes when copying the results.</p>
<p>R Markdown was designed to combine statistical analysis and communication into a single framework. The code and the results are combined in a single document, and you can also add text, external tables and images if you want. You can use R Markdown to produce documents in different formats (html, Word, pdf, presentation slides).</p>
<p>This website has been produced using R Markdown.</p>
<p>There are many places on the web where you can learn the basics of R Markdown and there is no point for me to repeat this here. Please see ch.27 from R for Data Science (<a href="http://r4ds.had.co.nz/r-markdown.html" class="uri">http://r4ds.had.co.nz/r-markdown.html</a>) and the official R Markdown website (<a href="https://rmarkdown.rstudio.com" class="uri">https://rmarkdown.rstudio.com</a>) and follow the links. You can also check this webpage: <a href="https://stat545.com/block007_first-use-rmarkdown.html" class="uri">https://stat545.com/block007_first-use-rmarkdown.html</a> (this is part of a course at the University of British Columbia that is similar to our module, but somewhat more advanced).</p>
<p>Here I will focus on a few things that are specifically relevant for your reports.</p>
<ol style="list-style-type: decimal">
<li>You can knit your reports in either pdf or Word formats. If you are going to use Word you will not be able to use the <strong>stargazer</strong> package for regression output. You may try to use a combination of the packages <strong>memisc</strong> and <strong>pander</strong> to achieve the same result (see <a href="https://stackoverflow.com/questions/24342162/regression-tables-in-markdown-format-for-flexible-use-in-r-markdown-v2" class="uri">https://stackoverflow.com/questions/24342162/regression-tables-in-markdown-format-for-flexible-use-in-r-markdown-v2</a>), but I haven’t tried this and I cannot guarantee that it will work. Also see <a href="https://rmarkdown.rstudio.com/articles_docx.html" class="uri">https://rmarkdown.rstudio.com/articles_docx.html</a></li>
</ol>
<p>If you want to knit as pdf you will need to install LaTeX first (<a href="https://www.latex-project.org" class="uri">https://www.latex-project.org</a>). Install LaTeX (complete version), restart your computer, restart R Studio and it should all work automatically.</p>
<ol start="2" style="list-style-type: decimal">
<li>If you knit as pdf with LaTeX <strong>stargazer</strong> will work just fine, but you need to set the <em>results</em> argument to ‘asis’ and run <strong>stargazer</strong> in a separate R chunk. The code will look something like</li>
</ol>
<pre><code>```{r results = 'asis'}
stargazer(m1, m2, m3, m4, type = "latex")
```</pre>
<p></code></p>
<ol start="3" style="list-style-type: decimal">
<li>You need to include all your code in your report. You do not need to include messages and warnings. You may also want to use cache to speed up rendering of your document. To achieve this result include in the beginning of your R Mardown file an R chunk setting the following global options.</li>
</ol>
<pre><code>```{r setup}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
knitr::opts_chunk$set(cache = TRUE)
```</pre>
<p></code></p>
<p>If you experience problems with caching switch it to FALSE.</p>
<ol start="4" style="list-style-type: decimal">
<li>To knit a document you can use a button in R Studio. In my experience, sometimes it does not work as intended. Then you can use the command line:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rmarkdown<span class="op">::</span><span class="kw">render</span>(<span class="st">&quot;your_file.Rmd&quot;</span>, <span class="st">&quot;rmarkdown::word_document&quot;</span>)
rmarkdown<span class="op">::</span><span class="kw">render</span>(<span class="st">&quot;your_file.Rmd&quot;</span>, <span class="st">&quot;rmarkdown::pdf_document&quot;</span>)</code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>You will want to include a bibliography in your report. An easy way to do this is simply to type it in the end of your document. However, this is not the most efficient way of doing this. I recommend you use Zotero for your bibliographies. You will also be able to use Zotero for essays for other modules and for your dissertation, even if you do not use R or R Markdown and write everything in Word. Once you master Zotero referencing and creating bibliographies will become much easier.</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li><p>Go to the Zotero website (<a href="https://www.zotero.org" class="uri">https://www.zotero.org</a>) and create an acount.</p></li>
<li><p>Download and install the Zotero client for your computer (<a href="https://www.zotero.org/download/" class="uri">https://www.zotero.org/download/</a>).</p></li>
<li><p>Download and install a Zotero plugin for your web browser. Once you have done this you will be able to automatically save references to your Zotero libraries from Google Scholar and other sources.</p></li>
<li><p>You can use Zotero with Word to reference and automatically create bibliographies. This is not relevant for this module, but for other modules and for your dissertation this is a very useful skill. To learn how to do this see <a href="https://www.zotero.org/support/word_processor_integration" class="uri">https://www.zotero.org/support/word_processor_integration</a></p></li>
<li><p>To use Zotero with R Markdown you need to do the following. Once you have added all the references to your library, export it as a bib file (File -&gt; Export Library -&gt; choose BibTex as the format). Save your bib file in the same folder as your R Markdown document.</p></li>
<li><p>To learn how to reference and cite in R Markdown see <a href="https://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html" class="uri">https://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html</a></p></li>
<li><p>To include a bibliography add the following line to the YAML header of your R Markdown document:</p></li>
</ol>
<p>bibliography: your_bibfile_name.bib</p>
<ol start="8" style="list-style-type: lower-alpha">
<li><p>The file <em>example.Rmd</em> available in the Github repo shows the minimal example of referencing and creating a bibliography with one source (see <a href="https://raw.githubusercontent.com/abessudnov/dataanalysis3/master/example.Rmd" class="uri">https://raw.githubusercontent.com/abessudnov/dataanalysis3/master/example.Rmd</a>). The associated bib file is available here: <a href="https://raw.githubusercontent.com/abessudnov/dataanalysis3/master/example.bib" class="uri">https://raw.githubusercontent.com/abessudnov/dataanalysis3/master/example.bib</a>.</p></li>
<li><p>The bib file can be opened and edited in any text editor and you can also use special software to do this, such as JabRef (<a href="http://www.jabref.org" class="uri">http://www.jabref.org</a>).</p></li>
</ol>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="datavis2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modelling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

</body>

</html>
