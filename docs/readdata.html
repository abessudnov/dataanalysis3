<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Data Analysis in Social Science 3</title>
  <meta name="description" content="A website for the Data Analysis in Social Science 3 module.">
  <meta name="generator" content="bookdown 0.6 and GitBook 2.6.7">

  <meta property="og:title" content="Data Analysis in Social Science 3" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://abessudnov.net/dataanalysis3/" />
  
  <meta property="og:description" content="A website for the Data Analysis in Social Science 3 module." />
  <meta name="github-repo" content="abessudnov/dataanalysis3" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Data Analysis in Social Science 3" />
  
  <meta name="twitter:description" content="A website for the Data Analysis in Social Science 3 module." />
  

<meta name="author" content="Alexey Bessudnov, expanded and edited by Max Shilling (BSc Sociology student 2018)">


<meta name="date" content="2018-06-25">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="assignment.html">
<link rel="next" href="transformdata.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113869422-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-113869422-1');
</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#things-to-do-before-the-next-class"><i class="fa fa-check"></i><b>1.1</b> Things to do before the next class</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="module-outline.html"><a href="module-outline.html"><i class="fa fa-check"></i><b>2</b> Module outline</a><ul>
<li class="chapter" data-level="2.1" data-path="module-outline.html"><a href="module-outline.html#practical-arrangements"><i class="fa fa-check"></i><b>2.1</b> Practical arrangements</a></li>
<li class="chapter" data-level="2.2" data-path="module-outline.html"><a href="module-outline.html#aims-of-the-module"><i class="fa fa-check"></i><b>2.2</b> Aims of the module</a></li>
<li class="chapter" data-level="2.3" data-path="module-outline.html"><a href="module-outline.html#attendance"><i class="fa fa-check"></i><b>2.3</b> Attendance</a></li>
<li class="chapter" data-level="2.4" data-path="module-outline.html"><a href="module-outline.html#assessment"><i class="fa fa-check"></i><b>2.4</b> Assessment</a></li>
<li class="chapter" data-level="2.5" data-path="module-outline.html"><a href="module-outline.html#syllabus-plan"><i class="fa fa-check"></i><b>2.5</b> Syllabus plan</a></li>
<li class="chapter" data-level="2.6" data-path="module-outline.html"><a href="module-outline.html#reading-list"><i class="fa fa-check"></i><b>2.6</b> Reading list</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="assignment.html"><a href="assignment.html"><i class="fa fa-check"></i><b>3</b> Assignment</a></li>
<li class="chapter" data-level="4" data-path="readdata.html"><a href="readdata.html"><i class="fa fa-check"></i><b>4</b> Read data</a><ul>
<li class="chapter" data-level="4.1" data-path="readdata.html"><a href="readdata.html#introduction-to-reading-data"><i class="fa fa-check"></i><b>4.1</b> Introduction to Reading Data</a></li>
<li class="chapter" data-level="4.2" data-path="readdata.html"><a href="readdata.html#reading-common-data-files-into-r"><i class="fa fa-check"></i><b>4.2</b> Reading common data files into R</a><ul>
<li class="chapter" data-level="4.2.1" data-path="readdata.html"><a href="readdata.html#ways-to-read-data-into-r"><i class="fa fa-check"></i><b>4.2.1</b> Ways to read data into R</a></li>
<li class="chapter" data-level="4.2.2" data-path="readdata.html"><a href="readdata.html#comparing-these-three-methods"><i class="fa fa-check"></i><b>4.2.2</b> Comparing these three methods</a></li>
<li class="chapter" data-level="4.2.3" data-path="readdata.html"><a href="readdata.html#editing-a-dataset-while-reading-it-into-r"><i class="fa fa-check"></i><b>4.2.3</b> Editing a dataset while reading it into R</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="readdata.html"><a href="readdata.html#reading-other-data-files"><i class="fa fa-check"></i><b>4.3</b> Reading other data files</a><ul>
<li class="chapter" data-level="4.3.1" data-path="readdata.html"><a href="readdata.html#excel"><i class="fa fa-check"></i><b>4.3.1</b> Excel</a></li>
<li class="chapter" data-level="4.3.2" data-path="readdata.html"><a href="readdata.html#spss"><i class="fa fa-check"></i><b>4.3.2</b> SPSS</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="readdata.html"><a href="readdata.html#saving-datasets"><i class="fa fa-check"></i><b>4.4</b> Saving datasets</a><ul>
<li class="chapter" data-level="4.4.1" data-path="readdata.html"><a href="readdata.html#saving-data-as-a-text-file"><i class="fa fa-check"></i><b>4.4.1</b> Saving data as a text file</a></li>
<li class="chapter" data-level="4.4.2" data-path="readdata.html"><a href="readdata.html#saving-data-as-an-excel-file"><i class="fa fa-check"></i><b>4.4.2</b> Saving data as an Excel file</a></li>
<li class="chapter" data-level="4.4.3" data-path="readdata.html"><a href="readdata.html#saving-data-as-an-spss-file"><i class="fa fa-check"></i><b>4.4.3</b> Saving data as an SPSS file</a></li>
<li class="chapter" data-level="4.4.4" data-path="readdata.html"><a href="readdata.html#loading-these-datasets-back-into-r"><i class="fa fa-check"></i><b>4.4.4</b> Loading these datasets back into R</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="readdata.html"><a href="readdata.html#saving-the-working-environment"><i class="fa fa-check"></i><b>4.5</b> Saving the working environment</a></li>
<li class="chapter" data-level="4.6" data-path="readdata.html"><a href="readdata.html#reading-in-multiple-waves-from-understanding-society"><i class="fa fa-check"></i><b>4.6</b> Reading in multiple waves from Understanding Society</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="transformdata.html"><a href="transformdata.html"><i class="fa fa-check"></i><b>5</b> Transform data</a><ul>
<li class="chapter" data-level="5.1" data-path="transformdata.html"><a href="transformdata.html#introduction-to-transforming-data"><i class="fa fa-check"></i><b>5.1</b> Introduction to transforming data</a></li>
<li class="chapter" data-level="5.2" data-path="transformdata.html"><a href="transformdata.html#operators-recap"><i class="fa fa-check"></i><b>5.2</b> Operators recap</a><ul>
<li class="chapter" data-level="5.2.1" data-path="transformdata.html"><a href="transformdata.html#relational-operators"><i class="fa fa-check"></i><b>5.2.1</b> Relational operators</a></li>
<li class="chapter" data-level="5.2.2" data-path="transformdata.html"><a href="transformdata.html#logical-operators"><i class="fa fa-check"></i><b>5.2.2</b> Logical operators</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="transformdata.html"><a href="transformdata.html#the-pipe-operator"><i class="fa fa-check"></i><b>5.3</b> The pipe operator (%&gt;%)</a></li>
<li class="chapter" data-level="5.4" data-path="transformdata.html"><a href="transformdata.html#select-variables"><i class="fa fa-check"></i><b>5.4</b> Select variables</a></li>
<li class="chapter" data-level="5.5" data-path="transformdata.html"><a href="transformdata.html#select-cases"><i class="fa fa-check"></i><b>5.5</b> Select cases</a></li>
<li class="chapter" data-level="5.6" data-path="transformdata.html"><a href="transformdata.html#recode-variables-both-base-r-and-dplyr-using-ifelse"><i class="fa fa-check"></i><b>5.6</b> Recode variables Both base R and dplyr using ifelse</a></li>
<li class="chapter" data-level="5.7" data-path="transformdata.html"><a href="transformdata.html#create-new-variables"><i class="fa fa-check"></i><b>5.7</b> Create new variables</a></li>
<li class="chapter" data-level="5.8" data-path="transformdata.html"><a href="transformdata.html#sort-data"><i class="fa fa-check"></i><b>5.8</b> Sort data</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="joining.html"><a href="joining.html"><i class="fa fa-check"></i><b>6</b> Join data</a><ul>
<li class="chapter" data-level="6.1" data-path="joining.html"><a href="joining.html#introduction-to-joining-data"><i class="fa fa-check"></i><b>6.1</b> Introduction to joining data</a></li>
<li class="chapter" data-level="6.2" data-path="joining.html"><a href="joining.html#joining-waves-1-and-2"><i class="fa fa-check"></i><b>6.2</b> Joining waves 1 and 2</a><ul>
<li class="chapter" data-level="6.2.1" data-path="joining.html"><a href="joining.html#the-key"><i class="fa fa-check"></i><b>6.2.1</b> The ‘key’</a></li>
<li class="chapter" data-level="6.2.2" data-path="joining.html"><a href="joining.html#inner-join"><i class="fa fa-check"></i><b>6.2.2</b> Inner join</a></li>
<li class="chapter" data-level="6.2.3" data-path="joining.html"><a href="joining.html#left-join"><i class="fa fa-check"></i><b>6.2.3</b> Left join</a></li>
<li class="chapter" data-level="6.2.4" data-path="joining.html"><a href="joining.html#right-join"><i class="fa fa-check"></i><b>6.2.4</b> Right join</a></li>
<li class="chapter" data-level="6.2.5" data-path="joining.html"><a href="joining.html#full-join"><i class="fa fa-check"></i><b>6.2.5</b> Full join</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i><b>7</b> Iteration</a></li>
<li class="chapter" data-level="8" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>8</b> Tidy data</a><ul>
<li class="chapter" data-level="8.1" data-path="tidy-data.html"><a href="tidy-data.html#long-and-wide-formats"><i class="fa fa-check"></i><b>8.1</b> Long and wide formats</a></li>
<li class="chapter" data-level="8.2" data-path="tidy-data.html"><a href="tidy-data.html#cleaning-the-data"><i class="fa fa-check"></i><b>8.2</b> Cleaning the data</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="datavis.html"><a href="datavis.html"><i class="fa fa-check"></i><b>9</b> Data visualisation</a><ul>
<li class="chapter" data-level="9.1" data-path="datavis.html"><a href="datavis.html#reading-in-the-data"><i class="fa fa-check"></i><b>9.1</b> Reading in the data</a></li>
<li class="chapter" data-level="9.2" data-path="datavis.html"><a href="datavis.html#visualising-one-quantitative-variable"><i class="fa fa-check"></i><b>9.2</b> Visualising one quantitative variable</a><ul>
<li class="chapter" data-level="9.2.1" data-path="datavis.html"><a href="datavis.html#histogram."><i class="fa fa-check"></i><b>9.2.1</b> Histogram.</a></li>
<li class="chapter" data-level="9.2.2" data-path="datavis.html"><a href="datavis.html#density-chart."><i class="fa fa-check"></i><b>9.2.2</b> Density chart.</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="datavis.html"><a href="datavis.html#visualising-one-categorical-variable"><i class="fa fa-check"></i><b>9.3</b> Visualising one categorical variable</a><ul>
<li class="chapter" data-level="9.3.1" data-path="datavis.html"><a href="datavis.html#bar-plot."><i class="fa fa-check"></i><b>9.3.1</b> Bar plot.</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="datavis.html"><a href="datavis.html#visualising-two-quantitative-variables"><i class="fa fa-check"></i><b>9.4</b> Visualising two quantitative variables</a></li>
<li class="chapter" data-level="9.5" data-path="datavis.html"><a href="datavis.html#visualising-one-categorical-and-one-quantitative-variable"><i class="fa fa-check"></i><b>9.5</b> Visualising one categorical and one quantitative variable</a></li>
<li class="chapter" data-level="9.6" data-path="datavis.html"><a href="datavis.html#visualising-two-categorical-variables"><i class="fa fa-check"></i><b>9.6</b> Visualising two categorical variables</a></li>
<li class="chapter" data-level="9.7" data-path="datavis.html"><a href="datavis.html#showing-the-relationships-by-group"><i class="fa fa-check"></i><b>9.7</b> Showing the relationships by group</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="datavis2.html"><a href="datavis2.html"><i class="fa fa-check"></i><b>10</b> Data visualisation 2</a><ul>
<li class="chapter" data-level="10.1" data-path="datavis2.html"><a href="datavis2.html#visualising-income"><i class="fa fa-check"></i><b>10.1</b> Visualising income</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>11</b> R Markdown</a></li>
<li class="chapter" data-level="12" data-path="modelling.html"><a href="modelling.html"><i class="fa fa-check"></i><b>12</b> Modelling</a><ul>
<li class="chapter" data-level="12.1" data-path="modelling.html"><a href="modelling.html#cross-sectional-analysis"><i class="fa fa-check"></i><b>12.1</b> Cross-sectional analysis</a><ul>
<li class="chapter" data-level="12.1.1" data-path="modelling.html"><a href="modelling.html#age-and-political-interest"><i class="fa fa-check"></i><b>12.1.1</b> Age and political interest</a></li>
<li class="chapter" data-level="12.1.2" data-path="modelling.html"><a href="modelling.html#sex-and-political-interest"><i class="fa fa-check"></i><b>12.1.2</b> Sex and political interest</a></li>
<li class="chapter" data-level="12.1.3" data-path="modelling.html"><a href="modelling.html#linear-model"><i class="fa fa-check"></i><b>12.1.3</b> Linear model</a></li>
<li class="chapter" data-level="12.1.4" data-path="modelling.html"><a href="modelling.html#interaction-effect-between-sex-and-age"><i class="fa fa-check"></i><b>12.1.4</b> Interaction effect between sex and age</a></li>
<li class="chapter" data-level="12.1.5" data-path="modelling.html"><a href="modelling.html#checking-the-assumptions"><i class="fa fa-check"></i><b>12.1.5</b> Checking the assumptions</a></li>
<li class="chapter" data-level="12.1.6" data-path="modelling.html"><a href="modelling.html#presenting-the-output-for-multiple-regression-models"><i class="fa fa-check"></i><b>12.1.6</b> Presenting the output for multiple regression models</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="modelling.html"><a href="modelling.html#longitudinal-analysis"><i class="fa fa-check"></i><b>12.2</b> Longitudinal analysis</a><ul>
<li class="chapter" data-level="12.2.1" data-path="modelling.html"><a href="modelling.html#simple-model"><i class="fa fa-check"></i><b>12.2.1</b> Simple model</a></li>
<li class="chapter" data-level="12.2.2" data-path="modelling.html"><a href="modelling.html#adding-a-time-constant-variable"><i class="fa fa-check"></i><b>12.2.2</b> Adding a time-constant variable</a></li>
<li class="chapter" data-level="12.2.3" data-path="modelling.html"><a href="modelling.html#adding-a-time-varying-variable"><i class="fa fa-check"></i><b>12.2.3</b> Adding a time-varying variable</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="modelling.html"><a href="modelling.html#further-reading"><i class="fa fa-check"></i><b>12.3</b> Further reading</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis in Social Science 3</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="readdata" class="section level1">
<h1><span class="header-section-number">4</span> Read data</h1>
<blockquote>
<p>Prerequisite: Chapter 11 ‘Data Import’ from R for Data Science, available at <a href="http://r4ds.had.co.nz/data-import.html" class="uri">http://r4ds.had.co.nz/data-import.html</a></p>
</blockquote>
<div id="introduction-to-reading-data" class="section level2">
<h2><span class="header-section-number">4.1</span> Introduction to Reading Data</h2>
<p>Once you have downloaded the data from the Understanding Society survey, the first thing you need to do is read the data into R. There are a number of ways to do this, and this class will cover loading data into R by using base R and both the readr and data.table packages.</p>
<p>The data we will be loading into R is the individual adult questionnaire answers from wave 1 (<em>UKDA-6614-tab/tab/us_w1/a_indresp.tab</em>). This should be saved in the <em>data</em> folder you created in your project folder (this was covered in the Introduction section to the course).</p>
</div>
<div id="reading-common-data-files-into-r" class="section level2">
<h2><span class="header-section-number">4.2</span> Reading common data files into R</h2>
<div id="ways-to-read-data-into-r" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Ways to read data into R</h3>
<div id="using-base-r" class="section level4">
<h4><span class="header-section-number">4.2.1.1</span> Using base R</h4>
<p>To read this data into R using functions from base R, we can first use the <strong>read.table()</strong> function. To read the data in correctly, we need to use <strong>header = TRUE</strong> as the first row of the data contains the names of the variables, and also <strong>stringsAsFactors = FALSE</strong>, which stops R from treating text variables as factors. We can convert these into factors later, when necessary.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">UndSoc.<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data/UKDA-6614-tab/tab/us_w1/a_indresp.tab&quot;</span>,
                      <span class="dt">header =</span> <span class="ot">TRUE</span>,
                      <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Different types of files need to read into R in different ways. The <strong>read.table()</strong> function reads data that is <em>tab separated</em> (the file will be called ‘name<em>.tab</em>’), the <strong>read.csv()</strong> function reads data that is <em>comma separated</em> (the file will be called ‘name<em>.csv</em>’) and <strong>read.delim()</strong> reads data that is separated in any way. These work in the same way, so once you’ve mastered one, you’ve mastered them all.</p>
</div>
<div id="using-the-readr-package" class="section level4">
<h4><span class="header-section-number">4.2.1.2</span> Using the readr package</h4>
<p>We can also read data into R using the package <em>readr</em>, part of the <em>tidyverse</em> package, with the <strong>read_tsv()</strong> command. This is the equivalent command to <strong>read.table()</strong> from base R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># We can either load the entire &#39;tidyverse&#39; package into R, which includes the readr package as well as others such as ggplot2, or just the &#39;readr&#39; package on its own.</span>

<span class="kw">library</span>(readr)

UndSoc.<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">read_tsv</span>(<span class="st">&quot;data/UKDA-6614-tab/tab/us_w1/a_indresp.tab&quot;</span>)</code></pre></div>
<p>The readr package also allows us to read different types of files into R. The commands <strong>read_csv()</strong> and <strong>read_delim()</strong> read comma and any type of separated data into R respectively.</p>
</div>
<div id="using-the-data.table-package" class="section level4">
<h4><span class="header-section-number">4.2.1.3</span> Using the data.table package</h4>
<p>The final way we are going to read this data into R is by using the <strong>fread()</strong> function from the <em>data.table</em> package. The advantage of the <strong>fread()</strong> command is that it can read any type of separated data into R, without you having to change anything if the file type you are trying to read changes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(data.table)

UndSoc.<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;data/UKDA-6614-tab/tab/us_w1/a_indresp.tab&quot;</span>)</code></pre></div>
<pre><code>## 
Read 58.8% of 50994 rows
Read 98.1% of 50994 rows
Read 50994 rows and 1364 (of 1364) columns from 0.187 GB file in 00:00:04</code></pre>
</div>
</div>
<div id="comparing-these-three-methods" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Comparing these three methods</h3>
<p>One of the important differences between these three methods for reading data into R is the length of time they take to read the data. We can compare this by reading the data into R again, this time wrapping our code with the command <strong>system.time()</strong>.</p>
<div id="using-base-r-1" class="section level4">
<h4><span class="header-section-number">4.2.2.1</span> Using base R</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Base R</span>
<span class="kw">system.time</span>(UndSoc.<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data/UKDA-6614-tab/tab/us_w1/a_indresp.tab&quot;</span>,
                      <span class="dt">header =</span> <span class="ot">TRUE</span>,
                      <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>))</code></pre></div>
<pre><code>##    user  system elapsed 
##   20.13    0.54   21.39</code></pre>
</div>
<div id="using-the-readr-package-1" class="section level4">
<h4><span class="header-section-number">4.2.2.2</span> Using the readr package</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">system.time</span>(UndSoc.<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">read_tsv</span>(<span class="st">&quot;data/UKDA-6614-tab/tab/us_w1/a_indresp.tab&quot;</span>))</code></pre></div>
<pre><code>##    user  system elapsed 
##    4.65    0.11    5.51</code></pre>
</div>
<div id="using-the-data.table-package-1" class="section level4">
<h4><span class="header-section-number">4.2.2.3</span> Using the data.table package</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">system.time</span>(UndSoc.<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;data/UKDA-6614-tab/tab/us_w1/a_indresp.tab&quot;</span>))</code></pre></div>
<pre><code>## 
Read 58.8% of 50994 rows
Read 98.1% of 50994 rows
Read 50994 rows and 1364 (of 1364) columns from 0.187 GB file in 00:00:04</code></pre>
<pre><code>##    user  system elapsed 
##    2.62    0.06    3.33</code></pre>
<p>From this we can see clear differences in loading time. With small data sets, the difference between these three methods will not be very noticeable or important, but with larger data the increase in loading times the <em>readr</em> and <em>data.table</em> packages provide can be quite substantial.</p>
</div>
</div>
<div id="editing-a-dataset-while-reading-it-into-r" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Editing a dataset while reading it into R</h3>
<div id="skipping-rows-of-data" class="section level4">
<h4><span class="header-section-number">4.2.3.1</span> Skipping rows of data</h4>
<p>Sometimes we do not want to read in the entire dataset we have into R, but instead want to ignore the first few rows. For example, if we were to do some sentiment analysis on Hamlet (found here: <a href="http://www.gutenberg.org/files/1524/1524-0.txt" class="uri">http://www.gutenberg.org/files/1524/1524-0.txt</a>, we would want to only read in the play itself, not the introductions before the start of the play. We can use the <strong>skip = “”</strong> command to only read the file from the start of the play, with each line of the script counting as a row.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Hamlet &lt;-<span class="st"> </span><span class="kw">read.delim</span>(<span class="st">&quot;http://www.gutenberg.org/files/1524/1524-0.txt&quot;</span>,
                     <span class="dt">skip =</span> <span class="dv">30</span>,
                     <span class="dt">header =</span> <span class="ot">FALSE</span>)</code></pre></div>
</div>
<div id="reading-only-select-variables" class="section level4">
<h4><span class="header-section-number">4.2.3.2</span> Reading only select variables</h4>
<p>When working with large datasets, like the one you will be using for your assignment, there are only certain variables that are of interest. As a result, it makes sense to load in only these variables, to make analysing your data easier to do.</p>
<p>Let’s say that we’re interested in how political interest is distributed across the UK, and want to analyse how this is differentiated by sex and age. The variables we need to read into R are these two (<em>a_sex</em> and <em>a_dvage</em>), as well as interest in politics (<em>a_vote6</em>) and the personal identification variable for each individual (<em>a_pidp</em>). We can use the <strong>select = “”</strong> command to do this.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">UndSoc.<span class="dv">4</span> &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;data/UKDA-6614-tab/tab/us_w1/a_indresp.tab&quot;</span>,
                 <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;pidp&quot;</span>, <span class="st">&quot;a_sex&quot;</span>, <span class="st">&quot;a_dvage&quot;</span>, <span class="st">&quot;a_vote6&quot;</span>))</code></pre></div>
</div>
<div id="setting-na-values" class="section level4">
<h4><span class="header-section-number">4.2.3.3</span> Setting <em>NA</em> values</h4>
<p>Sometimes, if we look at the raw data we are about to analyse, we see that there are a number of missing values. Instead of recoding these values as <em>NA</em> after we have loaded our data (found, in this example, at <a href="https://raw.githubusercontent.com/abessudnov/dataanalysis3/master/exData/Table3.txt" class="uri">https://raw.githubusercontent.com/abessudnov/dataanalysis3/master/exData/Table3.txt</a>), we can do this while reading our data into R using the <strong>na.strings = “”</strong> command.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">MissingData &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;exData/Table3.txt&quot;</span>,
                 <span class="dt">header =</span> <span class="ot">TRUE</span>,
                 <span class="dt">skip =</span> <span class="dv">2</span>,
                 <span class="dt">na.strings =</span> <span class="kw">c</span>(<span class="st">&quot;*&quot;</span>, <span class="st">&quot;**&quot;</span>, <span class="st">&quot;--&quot;</span>))</code></pre></div>
</div>
</div>
</div>
<div id="reading-other-data-files" class="section level2">
<h2><span class="header-section-number">4.3</span> Reading other data files</h2>
<div id="excel" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Excel</h3>
<p>In R, you can also read data that was created in Excel. Excel files are saved primarily as <em>.xls</em> or <em>.xlsx</em> files. Fortunately, after installing the <em>readxl</em> package, the command <strong>read_excel()</strong> can read both formats into R. Using the example Excel document found at (<a href="https://github.com/abessudnov/dataanalysis3/blob/master/exData/tableExcel.xlsx" class="uri">https://github.com/abessudnov/dataanalysis3/blob/master/exData/tableExcel.xlsx</a>), we can easily read this into R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readxl)

Excel &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;exData/tableExcel.xlsx&quot;</span>)</code></pre></div>
<p>When reading Excel files into R, <strong>read_excel()</strong> defaults to loading the first sheet. If there are multiple sheets in our document (by opening the Excel file we can see that there are 2 in this case), we can load different sheets in with the <strong>sheet = “”</strong> command.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Excel2 &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;exData/tableExcel.xlsx&quot;</span>,
                     <span class="dt">sheet =</span> <span class="dv">2</span>)</code></pre></div>
<p>However, if we look at the sheet we have just loaded, we can see that there are two <em>NA</em> values, one of which is coded as <em>“NA”</em>. Furthermore, if we compare how these <em>NA</em> values appear in our data with the ones from our <em>MissingData</em> dataset, we can see that they aren’t actually coded as missing values, but instead as values called <em>NA</em> and <em>“NA”</em>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(MissingData)</code></pre></div>
<pre><code>##     Name Age Height Weight Sex
## 1   Alex  25    177     57   F
## 2  Lilly  31     NA     69   F
## 3   Mark  NA    190     83   M
## 4 Oliver  52    179     75   M
## 5 Martha  76   &lt;NA&gt;     70   F
## 6  Lucas  49    183     NA   M</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(Excel2)</code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   actor movie sentence
##   &lt;chr&gt; &lt;dbl&gt;    &lt;chr&gt;
## 1     A     1       NA
## 2     B     2 &quot;\&quot;NA\&quot;&quot;
## 3     C     3       15</code></pre>
<p>To fix this, we need to set both these values as <em>NA</em>, which we can do with the <strong>na = “”</strong> command.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Excel3 &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;exData/tableExcel.xlsx&quot;</span>,
                     <span class="dt">sheet =</span> <span class="dv">2</span>,
                     <span class="dt">na =</span> <span class="kw">c</span>(<span class="st">&#39;NA&#39;</span>, <span class="st">&#39;&quot;NA&quot;&#39;</span>))

<span class="co"># Note that as one of the missing values is called &quot;NA&quot;, you have to use inverted commas (&#39;&#39;) around the entire value for R to change it to an NA value, rather than the usual speech marks (&quot;&quot;). Inverted commas and speech marks are interchangable in R, though if you use one to open a command, you cannot use the other to close it.</span></code></pre></div>
<p>We can now see that this dataset has true <em>NA</em> values in it for the missing data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(Excel3)</code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   actor movie sentence
##   &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt;
## 1     A     1       NA
## 2     B     2       NA
## 3     C     3       15</code></pre>
</div>
<div id="spss" class="section level3">
<h3><span class="header-section-number">4.3.2</span> SPSS</h3>
<p>As many people use SPSS instead of R to analyse data, there are times when you will have to use data that is intended for use in SPSS. The <em>haven</em> package allows us to do this, and as an example we will read a dataset containing some data from a survey.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)

SPSS &lt;-<span class="st"> </span><span class="kw">read_spss</span>(<span class="st">&quot;exData/survey.sav&quot;</span>)</code></pre></div>
<p>You can also use <em>haven</em> to read data in the Stata and SAS formats.</p>
</div>
</div>
<div id="saving-datasets" class="section level2">
<h2><span class="header-section-number">4.4</span> Saving datasets</h2>
<p>Once you have read your data into R you can save it as a file so you can load it back into R at a later date to continue working on it. Again, there are a number of different ways to do this.</p>
<div id="saving-data-as-a-text-file" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Saving data as a text file</h3>
<p>Having read the first wave of data into R with only the variables we are interested in (see <em>Reading only select variables</em>), we can save this data as a text file using base R, without having to install any new packages. All we need to do is create a folder called <em>myData</em> in the folder where you have saved your project, and then you can save your dataset to this folder.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(UndSoc.<span class="dv">4</span>, <span class="st">&quot;myData/UndSoc.4.csv&quot;</span>)</code></pre></div>
<p>As you had to get specific permission to access the <em>Understanding Society</em> dataset, it is important you do not save this data to Github. This applies to every method of saving data from R we will cover here. Add the following line to your <em>gitignore</em> file to keep the <em>myData</em> folder untracked:</p>
<p><strong>myData/</strong></p>
</div>
<div id="saving-data-as-an-excel-file" class="section level3">
<h3><span class="header-section-number">4.4.2</span> Saving data as an Excel file</h3>
<p>To save our data as an Excel file, we need to first install the <em>writexl</em> package, and use the command <strong>write_xlsx()</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(writexl)

<span class="kw">write_xlsx</span>(UndSoc.<span class="dv">4</span>, <span class="dt">path =</span> <span class="st">&#39;myData/UndSoc.4.xlsx&#39;</span>, <span class="dt">col_names =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="saving-data-as-an-spss-file" class="section level3">
<h3><span class="header-section-number">4.4.3</span> Saving data as an SPSS file</h3>
<p>We can use the <em>haven</em> package we used to read files saved for use in SPSS to write data as SPSS files too, using the <strong>write_sav()</strong> command.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write_sav</span>(UndSoc.<span class="dv">4</span>, <span class="st">&quot;myData/UndSoc.4.sav&quot;</span>)</code></pre></div>
</div>
<div id="loading-these-datasets-back-into-r" class="section level3">
<h3><span class="header-section-number">4.4.4</span> Loading these datasets back into R</h3>
<p>To read any of these datasets back into R, use what you learnt in <em>Reading common data files into R</em>.</p>
</div>
</div>
<div id="saving-the-working-environment" class="section level2">
<h2><span class="header-section-number">4.5</span> Saving the working environment</h2>
<p>If you want to save an entire workspace, rather than just individual files, the command <strong>save.image()</strong> does this. This saves not only all loaded data frames but any saved objects: models, plots, functions, etc.</p>
<p>Before saving the entirer workspace we’ll remove all the objects from it, except two: <em>Hamlet</em> and <em>MissingData</em>. We’ll do this just to save time, otherwise saving the data image will take too long.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># First we&#39;ll print all the objects we currently have in the memory.</span>

<span class="kw">ls</span>()</code></pre></div>
<pre><code>##  [1] &quot;Excel&quot;       &quot;Excel2&quot;      &quot;Excel3&quot;      &quot;Hamlet&quot;      &quot;MissingData&quot;
##  [6] &quot;SPSS&quot;        &quot;UndSoc.1&quot;    &quot;UndSoc.2&quot;    &quot;UndSoc.3&quot;    &quot;UndSoc.4&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Then we can remove all the objects, except the 4th and the 5th.</span>

<span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">ls</span>()[<span class="op">-</span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">5</span>)])</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Saving the workspace.</span>

<span class="kw">save.image</span>(<span class="st">&quot;myData/Workspace.RData&quot;</span>)

<span class="co"># Clearing the current workspace.</span>

<span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">ls</span>())

<span class="co"># Loading the workspace back into R.</span>

<span class="kw">load</span>(<span class="st">&quot;myData/Workspace.RData&quot;</span>)</code></pre></div>
</div>
<div id="reading-in-multiple-waves-from-understanding-society" class="section level2">
<h2><span class="header-section-number">4.6</span> Reading in multiple waves from Understanding Society</h2>
<p>For your assignment, you are required to analyse at least two waves of data from the Understanding Society dataset. We will cover how to join multiple waves together in a future lesson, but before doing this, let’s read in the first two waves of Understanding Society. To do this, we need to use the function <strong>fread()</strong> from the data.table package, as the data are tab separated.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># First, we clear the current workspace.</span>

<span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">ls</span>())

UndSoc1 &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;data/UKDA-6614-tab/tab/us_w1/a_indresp.tab&quot;</span>)</code></pre></div>
<pre><code>## 
Read 58.8% of 50994 rows
Read 50994 rows and 1364 (of 1364) columns from 0.187 GB file in 00:00:04</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">UndSoc2 &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;data/UKDA-6614-tab/tab/us_w2/b_indresp.tab&quot;</span>)</code></pre></div>
<pre><code>## 
Read 54.9% of 54597 rows
Read 91.6% of 54597 rows
Read 54597 rows and 1615 (of 1615) columns from 0.233 GB file in 00:00:04</code></pre>
<p>As we discussed earlier in this class, these files take a lot longer to load into R than other data files you have used in the past. This is because the files themselves are large, and take up a lot of space in the memory. We can see just how much space they take up by using the <strong>object.size()</strong> command.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">object.size</span>(UndSoc1)</code></pre></div>
<pre><code>## 286020872 bytes</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">object.size</span>(UndSoc2)</code></pre></div>
<pre><code>## 364341464 bytes</code></pre>
<p>However, this does not give us an answer that we can easily interpret. Therefore, by using the <strong>format()</strong> command, we can specify how we want R to show us this data. In this case, by adding <strong>units = “”</strong> we can tell R to show us how large the files are in specific units.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># By adding units = &quot;auto&quot; R automatically chooses the clearest way to show us the size of the files.</span>

<span class="kw">format</span>(<span class="kw">object.size</span>(UndSoc1), <span class="dt">units =</span> <span class="st">&quot;auto&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;272.8 Mb&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="kw">object.size</span>(UndSoc2), <span class="dt">units =</span> <span class="st">&quot;auto&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;347.5 Mb&quot;</code></pre>
<p>To make the files we are working with smaller, and thus make R carry out our analysis quicker, we can select only the variables we need for our analysis. We are only going to load a few variables here to keep this simple; you can always add more to your analysis. Here, as we are looking at level of interest in politics, they are:</p>
<ul>
<li><p>pidp: this is the id number given to each respondent to identify them in each wave</p></li>
<li><p>a_sex: sex from wave 1</p></li>
<li><p>a_dvage: age from wave 1</p></li>
<li><p>a_vote6: level of interest in politics from wave 1</p></li>
<li><p>b_sex: sex from wave 2</p></li>
<li><p>b_dvage: age from wave 2</p></li>
<li><p>b_vote6: level of interest in politics from wave 2</p></li>
</ul>
<p>By using what we covered earlier, we can select only the variables we want to read into R, making the loading times decrease significantly as they are much smaller datasets.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">UndSoc1ed &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;data/UKDA-6614-tab/tab/us_w1/a_indresp.tab&quot;</span>,
                 <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;pidp&quot;</span>, <span class="st">&quot;a_sex&quot;</span>, <span class="st">&quot;a_dvage&quot;</span>, <span class="st">&quot;a_vote6&quot;</span>))

UndSoc2ed &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;data/UKDA-6614-tab/tab/us_w2/b_indresp.tab&quot;</span>,
                 <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;pidp&quot;</span>, <span class="st">&quot;b_sex&quot;</span>, <span class="st">&quot;b_dvage&quot;</span>, <span class="st">&quot;b_vote6&quot;</span>))</code></pre></div>
<p>We can check that these are much smaller objects, and that our code was successful.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="kw">object.size</span>(UndSoc1ed), <span class="dt">units =</span> <span class="st">&quot;auto&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;798.3 Kb&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="kw">object.size</span>(UndSoc2ed), <span class="dt">units =</span> <span class="st">&quot;auto&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;854.6 Kb&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(UndSoc1ed)</code></pre></div>
<pre><code>##        pidp a_sex a_dvage a_vote6
## 1: 68001367     1      39       3
## 2: 68004087     1      59       2
## 3: 68006127     2      39       4
## 4: 68006135     2      17       4
## 5: 68006807     2      72       4
## 6: 68007487     2      57       1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(UndSoc2ed)</code></pre></div>
<pre><code>##        pidp b_sex b_dvage b_vote6
## 1: 68004087     1      60       2
## 2: 68006127     2      40       4
## 3: 68006807     2      73       4
## 4: 68007487     2      58       2
## 5: 68008167     2      39       4
## 6: 68008171     1      52      -7</code></pre>
<p>As we no longer have any use for the original data we loaded into R, we can remove them from R to free up the memory they are unnecessarily taking up.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(UndSoc1, UndSoc2)</code></pre></div>
<p>We can then save these datasets so we can easily load them into R at a later date to continue working on them. We will use these in future classes. Here, we save the workspace, which includes just waves 1 and 2 of the Understanding Society data, for future use.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">save.image</span>(<span class="st">&quot;myData/ReadData.RData&quot;</span>)</code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="assignment.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="transformdata.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
